@page "/profile/edit"

<div class="container flex flex-col">
    <div>
        <ProfilePictureView />
    </div>
    <div>
        <InputGroupView Label="Name"
                        Value="@username"
                        Placeholder="Enter your name"
                        ErrorMessage="@usernameError"
                        OnChange="OnUsernameChanged" />

        <InputGroupView Label="Phone Number"
                        Type="text"
                        Value="@phoneNumber"
                        Placeholder="Enter your phone number"
                        ErrorMessage="@phoneNumberError"
                        OnChange="OnPhoneNumberChanged" />
    </div>
    <div class="flex justify-start gap-2">
        <SaveButtonView OnClick="@HandleSave" />
        <CancelButtonView OnClick="@HandleCancel" />
    </div>
</div>

@code {
    private string username = "";
    private string phoneNumber = "";
    private string usernameError = "";
    private string phoneNumberError = "";

    private void OnUsernameChanged(ChangeEventArgs e)
    {
        username = e.Value?.ToString() ?? "";
        usernameError = string.IsNullOrEmpty(username) ? "Username cannot be empty." : "";
    }

    private void OnPhoneNumberChanged(ChangeEventArgs e)
    {
        phoneNumber = e.Value?.ToString() ?? "";
        phoneNumberError = string.IsNullOrEmpty(phoneNumber) ? "Phone number cannot be empty." : "";
    }

    private async Task HandleSave()
    {
        if (string.IsNullOrEmpty(username))
        {
            usernameError = "Username cannot be empty.";
        }
        if (string.IsNullOrEmpty(phoneNumber))
        {
            phoneNumberError = "Phone number cannot be empty.";
        }
        if (!string.IsNullOrEmpty(username) && !string.IsNullOrEmpty(phoneNumber))
        {
            // Save the data
        }
    }

    private async Task HandleCancel()
    {
        // Back to profile page
    }
}